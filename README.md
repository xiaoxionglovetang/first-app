# welcome to my webapp

## 介绍
>这是我第一次做webapp, 是用一个基于node.js的Express架构和mongoDB开发的，前端部分用的是vue来绑定HTML中的数据，client端和server端的交互用的是axios。
- 使用webapp做了一个个人blogs,目前具有的功能的注册，登录，主页，文章列表，展示/添加/修改文章。还在继续开发中...
- 下面分为两个部分：
1. 大致介绍一下这个webapp的部分设计（优化）
2. 自我评价（尽量让招聘单位更加了解我）

## webapp中的一些设计的考虑
### 路由
##### 路由归类
> 考虑到当路由不断增加，在app.js中管理路由就会非常麻烦。所以通过截流的方式，让app.js只处理两个路由文件，一个负责提供页面，一个负责提供数据。

```
app.use('/', page);
app.use('/api', api);
```
>把获取页面的路由route.page.js和获取数据的路由 route.api.js 分开写在两个不同的 js 文件中，可以在业务功能上区分开，今后也可以由不同的不同的人分别维护。

##### 合理的使用服务器渲染和延迟渲染
- 用户发出请求，如果我是采用`res.render`来响应，那么整个页面的构建都是在服务端完成。

- 构建整个页面的所有处理时间都在服务端。这个时间包括从数据库抓取数据和由数据构建html页面。

- 假如数据量大，或者构建页面的处理逻辑复杂，势必就导致一个请求在服务器的处理时间变长。那么 WebApp的处理能力就很有压力，可能导致宕机。

- 所以部分请求的响应采用了延迟渲染，WebApp 只需要返回一个基础页面的模板以及提供一个api供客户端抓取必要的数据。其余的都交给客户端处理。尽量的减少服务器压力。

##### 优化api
>由于提供数据的api可能会吧数据提供给前端、android 应用、ios应用、小程序等，所以得采用一种标准化的设计方式。不然会怕乱掉。

- 增加 API 版本控制（v1就是第一版，今后升级了就可以记录为v2.）

```
[GET] /api/v1/users
[GET] /api/v1/posts
[POST] /api/v1/posts/create
[POST] /api/v1/posts/edit
[GET] /api/v1/posts/one
```

- 尽可能用 http 自身的方法来区分路由功能

```
[GET] /api/v1/users
[GET] /api/v1/posts
[POST] /api/v1/posts/create
[PATCH] /api/v1/posts/edit
[GET] /api/v1/posts/one
```

- 避免使用动词来区分路由

```
[POST] /api/v1/posts // 去掉动词
[PATCH] /api/v1/posts  // 去掉动词
```
>因为动词多了后就很容易产生歧义，路由尽量避免

- 用资源 ID 而不是单词区分资源

```
[GET] /api/v1/posts/:id // 获取某一个文章
```
这些点是参照[restfull api 设计指南 ](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)

---

### view
>随着功能的复杂，不断的添加页面，意味着要不断的新建页面。但是每个页面都有很多内容是重复的。所有引入了 `express-ejs-layouts`,构建一个全局的页面模板。

---

### 优化结果处理
在开发过程中发现在返回结果时，发现了自己的几个错误：
1. 自己设计了很多错误值，如：`success：false/true`，所以修改为使用状态码。

2. patch请求其实不需要服务端返回数据。
 
除此之外还优化了登录时出息的错误处理、axios 的错误处理和Cookie存储用户信息的不安全问题等

---
## 关于我
### 为什么想做前端
我的上一份工作实在国企上班，因为每天上班都是在“混日子”，因为时间不断的流逝，但这份工作，对于我的成长没有太大帮，没有进步的感觉让我越来越煎熬。

那时候在《得到》APP上接触到李笑来。他经常鼓励很多人学习编程，实话说我是被他影响，才想到如果我转行，就去学习编程。

所以最早学习编程是为了转行，为了一份工作，为了提高自己的学习能力，掌握一门技能。

当然现在是因为自己很喜欢JS,并且想成为一个优秀的程序员。

### 我学习前端的一些经历
1. 最开始的时候是在6月份，去报名网易的《前端工程师》的网课。因为从小学习就差，没有好的学习 习惯，那个时候的我，从学习HTML的时候就懵懵懂懂，到了CSS就崩溃了，完全听不懂课，当时我还特别傻的去把CSS的选择器的用法、布局用到的语法都去打印出来，去死记硬背，结果也没背下来，到了JS就完全不懂了，当时的状态就是整个人都崩溃了，逃避，不愿意去看代码、听课程，每天都去网吧玩游戏。（但是那个时候我是已经辞职了）。越玩就越压力大，就越想逃避。最后交作业的时候，就只用CSS和HTML做了一个网易的官网主页（静态页面）
2. 到了8月中下旬的时候，我在李笑来的《新生大学》报了一个《js入门课》，从新开始学习编程。老师从来不交我们如何写代码，只是教我们如何思考，然后自己去学习。从Git的基本用法，到如何使用github到`json`，到数据类型的理解，到如何把想法编程代码，再到函数（同步到异步）。这一路上我也是跌跌撞撞的勉强走完，最后用`fs.readFile`去读数据然后用`fs.writeFile`写数据，在加上html和bootstrap做了一个简单页面。在这个过程中学到了很多编程思想，了解了很多技术和知识的特性。也知道了该怎么学，未来该怎么走等等。

3. 后面就自己买了淘宝前端翻译的犀牛书,开始学习JS基础知识，跟着看，跟着敲。有些时候遇到不会的知识就去google 或者在 developer.mozilla.org查或是在Github上查。还去学一下Vue。

4. 在后面就开始跟着老师学习Webapp,学express，当然这个过程基本上是自学的，老师不讲代码的，但是回去教我们去理解里面的重点。这个过程其实对我的自学能力提升挺多的，也对通过做这个项目让我对前端有了更清晰的认识，从数据的流动、HTTP请求，到各种中间件的学习，到docker、数据库的学习,从中还学习到了很多代码的设计，和promise的运用来写出更优质的代码（当然，pormise还在学...）这个过程让我喜欢上了JS。打心底里面想成为一个合格的程序员。

### 我想对招聘公司说的话
- 真的很感谢您能花时间进我的项目来看。

- 站在您的角度来想，您招聘一个没有经验的同学，是有很大的风险的。您也完全可以招聘一个有经验的同学。
- 我当时在做这个项目的时候，就在想如果我拿写个项目当面试的作品，那么我不要做一个只是拿来看的玩具，我想向工程师一样做一个可以用的产品。
>这样做的目的是为了证明：我具备工作需要学习能力，我知道如何从零开始去开发一个项目，有优化代码的能力。

- 最后：我特别喜欢js,特别希望今后的我能够成为一名优秀的工程师，我现在特别希望能够加入一个开发团队，和团队一起进步。

##### 感谢您付出的时间，和宝贵的注意力


